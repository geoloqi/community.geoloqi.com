<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-ca">
<head>
   <title>iPhone4 device can not receive message send notification. - Geoloqi Community</title>
<link rel="stylesheet" type="text/css" href="/themes/geoloqi/design/style.css?v=2.0.18.1" media="all" />
<link rel="stylesheet" type="text/css" href="/plugins/FileUpload/design/fileupload.css?v=1.5.2" media="all" />
<link rel="stylesheet" type="text/css" href="/plugins/Voting/design/voting.css?v=1.1.1b" media="all" />
<!--[if gt IE 6]><link rel="stylesheet" type="text/css" href="/plugins/cleditor/design/jquery.cleditor.css?v=1.1" media="all" /><![endif]-->
<!--[if !IE]> --><link rel="stylesheet" type="text/css" href="/plugins/cleditor/design/jquery.cleditor.css?v=1.1" media="all" /><!-- <![endif]-->
<link rel="shortcut icon" href="/themes/geoloqi/design/favicon.png" type="image/x-icon" />
<link rel="canonical" href="http://community.geoloqi.com/discussion/101/iphone4-device-can-not-receive-message-send-notification./p1" />
<script src="/js/library/jquery.js?v=2.0.18.1" type="text/javascript"></script>
<script src="/js/library/jquery.livequery.js?v=2.0.18.1" type="text/javascript"></script>
<script src="/js/library/jquery.form.js?v=2.0.18.1" type="text/javascript"></script>
<script src="/js/library/jquery.popup.js?v=2.0.18.1" type="text/javascript"></script>
<script src="/js/library/jquery.gardenhandleajaxform.js?v=2.0.18.1" type="text/javascript"></script>
<script src="/js/global.js?v=2.0.18.1" type="text/javascript"></script>
<script src="/js/library/jquery.ui.packed.js?v=2.0.18.1" type="text/javascript"></script>
<script src="/applications/vanilla/js/options.js?v=2.0.18.1" type="text/javascript"></script>
<script src="/applications/vanilla/js/bookmark.js?v=2.0.18.1" type="text/javascript"></script>
<script src="/applications/vanilla/js/discussion.js?v=2.0.18.1" type="text/javascript"></script>
<script src="/applications/vanilla/js/autosave.js?v=2.0.18.1" type="text/javascript"></script>
<script src="/plugins/FileUpload/js/fileupload.js?v=1.5.2" type="text/javascript"></script>
<script src="/plugins/Voting/voting.js?v=1.1.1b" type="text/javascript"></script>
<!--[if gt IE 6]><script src="/plugins/cleditor/js/jquery.cleditor.min.js?v=1.1" type="text/javascript"></script><![endif]-->
<!--[if !IE]> --><script src="/plugins/cleditor/js/jquery.cleditor.min.js?v=1.1" type="text/javascript"></script><!-- <![endif]-->
<style type="text/css">
a.PreviewButton {
	display: none !important;
}
</style>
<script type="text/javascript">
	jQuery(document).ready(function($) {
		// Make sure the removal of autogrow does not break anything
		jQuery.fn.autogrow = function(o) { return; }
		// Attach the editor to comment boxes
		jQuery("#Form_Body").livequery(function() {
			var frm = $(this).parents("div.CommentForm");
			ed = jQuery(this).cleditor({width:"100%", height:"100%"})[0];
			this.editor = ed; // Support other plugins!
			jQuery(frm).bind("clearCommentForm", {editor:ed}, function(e) {
				frm.find("textarea").hide();
				e.data.editor.clear();
			});
		});
	});
</script>
<script type="text/javascript">var _gaq = _gaq || [];_gaq.push(['_setAccount', 'UA-25750303-8']);_gaq.push(['_trackPageview']);(function() {var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();
</script>
  <link rel="pingback" href="http://pingback.me/geoloqi/xmlrpc" />
</head>
<body id="vanilla_discussion_comment" class="Vanilla Discussion comment ">
   <div id="Frame">
      <div id="Head">
         <div class="Menu">
            <h1><a class="Title" href="/"><span><img src="http://community.geoloqi.com/uploads/UCF5TIEJOT0K.png" alt="Geoloqi Community" /></span></a></h1>
            <ul id="Menu"><li class=" Highlight"><a href="/discussions">Discussions</a></li>
<li><a href="/irc">IRC</a></li>
<li class="NonTab"><a href="/entry/signin?Target=discussion%2Fcomment%2F337">Sign In</a></li>
</ul>            <div class="Search"><form method="get" action="/search">
<div>
<input type="text" id="Form_Search" name="Search" value="" class="InputBox" /><input type="submit" id="Form_Go" value="Go" class="Button" />
</div>
</form></div>
         </div>
      </div>
      <div id="Body">
         <div id="Content"><div class="Tabs HeadingTabs DiscussionTabs FirstPage">
   
   <ul>
      <li><a href="/categories/support" class="TabLink">Support</a></li>
   </ul>
   <div class="SubTab">iPhone4 device can not receive message send notification.</div>
</div>
<ul class="DataList MessageList Discussion FirstPage">
   <li class="Item Comment FirstComment" id="Discussion_101">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="/entry/signin?Target=discussion%2Fcomment%2F337" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="/entry/signin?Target=discussion%2Fcomment%2F337" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a href="/profile/394/sRNUE1idz6VP00qca">sRNUE1idz6VP00qca</a>         </span>
         <span class="DateCreated">
            <a href="/discussion/101/iphone4-device-can-not-receive-message-send-notification./p1" class="Permalink" name="Item_1" rel="nofollow">August 2012</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			<span style="font-family: Arial, Verdana; font-size: small;">Hi,</span><div style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;"><br></div><div style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;">Following i have done for getting message push notification using message/send&nbsp;</div><div style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;">&nbsp;api.</div><div style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;">1. Added Geoloqi sdk lib to my sample app.</div><div style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;">2. In appDelegare&nbsp;<span style="font-size: 10pt;">didFinishLaunchingWithOptions</span>&nbsp;used following code:</div><div style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;"><span style="font-size: 10pt;">&nbsp; &nbsp;</span><span class="s1" style="font-size: 10pt;">&nbsp;[</span><span class="s2" style="font-size: 10pt;">LQSession</span><span class="s1" style="font-size: 10pt;"> </span><span class="s3" style="font-size: 10pt;">setAPIKey</span><span class="s1" style="font-size: 10pt;">:</span><span style="font-size: 10pt;">@"64367a64533c16f9c943bf696f143142"</span><span class="s1" style="font-size: 10pt;"> </span><span class="s3" style="font-size: 10pt;">secret</span><span class="s1" style="font-size: 10pt;">:</span><span style="font-size: 10pt;">@"f6f487cd7229d0e8b0bdfdc317601b05"</span><span class="s1" style="font-size: 10pt;">];</span><span style="font-size: 10pt;">&nbsp; &nbsp;&nbsp;</span></div><br><p class="p3" style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;"><span class="s1">&nbsp; &nbsp; [</span><span class="s2">LQTracker</span><span class="s1"> </span>configureAnonymousUserAccountWithUserInfo<span class="s1">:</span><span class="s4">nil</span><span class="s1"> </span>profile<span class="s1">:</span>LQTrackerProfilePassive<span class="s1">];</span><span style="font-size: 10pt;">&nbsp;</span></p><br><p class="p3" style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;"><span class="s1">&nbsp; &nbsp; [</span><span class="s2">LQSession</span><span class="s1"> </span>application<span class="s1">:application </span>didFinishLaunchingWithOptions<span class="s1">:launchOptions];</span></p><p class="p3" style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;"><span class="s1">3.Added remote notification registering code as below:</span></p><p class="p3"><span class="s1"><br><br><br><br><br><br><br><br><span class="s1">&nbsp;</span><span class="s2">NSLog</span><span class="s1">(</span>@"Registering for push notifications..."<span class="s1">); &nbsp; &nbsp;</span></span></p><br><p class="p2" style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;"><span class="s1">&nbsp; &nbsp; [[</span><span class="s3">UIApplication</span><span class="s1"> </span>sharedApplication<span class="s1">]</span><span style="font-size: 10pt;">registerForRemoteNotificationTypes</span><span class="s1" style="font-size: 10pt;">:</span><span class="s1" style="font-size: 10pt;">(</span><span style="font-size: 10pt;">UIRemoteNotificationTypeAlert</span><span class="s1" style="font-size: 10pt;"> |&nbsp;</span><span style="font-size: 10pt;">UIRemoteNotificationTypeBadge</span><span class="s1" style="font-size: 10pt;"> |&nbsp;</span></p><br><p class="p2" style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;"><span class="s1">&nbsp; &nbsp; &nbsp; </span>UIRemoteNotificationTypeSound<span class="s1">)];</span></p><p class="p2" style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;"><span class="s1">4.Added notification handling methods that you mentioned in sample code to handle notification.</span></p><p class="p2" style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;"><span class="s1">5.Created .p12 file and uploaded on Geoloqi application web site for created application.</span></p><p class="p2"><span class="s1"><span style="font-family: Arial, Verdana; font-size: small;">6.It is registered for apple push notification and received device token in "</span></span>didRegisterForRemoteNotificationsWithDeviceToken"<span style="font-family: Arial, Verdana; font-size: small;">&nbsp;method.</span></p><p class="p2"><span style="font-family: Arial, Verdana; font-size: small;">7.</span>account/profile api called to get the anonymous user-id. after getting user id I am calling message/send api to check message push notification. I am getting following response for message/send APi.</p><p class="p2"></p><p class="p2"><br></p><p class="p2">{<span class="Apple-tab-span" style="white-space:pre">	</span> &nbsp; &nbsp;devices = 0;</p><p class="p2"><span class="Apple-tab-span" style="white-space:pre">	</span> &nbsp; &nbsp;result = "no_devices_registered";</p><p class="p2"><span class="Apple-tab-span" style="white-space:pre">	</span> &nbsp; &nbsp;user = "_kJfzR1iiPgkJRhLb1";</p><p class="p2"><span class="Apple-tab-span" style="white-space:pre">	</span> &nbsp; &nbsp;"user_id" = SoS;</p><p class="p2"><span class="Apple-tab-span" style="white-space:pre">	</span>}</p><p class="p2">still did not received message push notification on iphone device.</p><p class="p2">Also done following for registering for push notification.</p><p class="p2">1.Called following method for push registration:</p><p class="p2">&nbsp;&nbsp;- (<span class="s1">void</span>)registerForPushNotifications {</p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><p class="p2"><span class="s2">&nbsp; &nbsp; [</span><span class="s3">LQSession</span><span class="s2"> </span>registerForPushNotificationsWithCallback<span class="s2">:^(</span><span class="s4">NSData</span><span class="s2"> *deviceToken, </span><span class="s4">NSError</span><span class="s2"> *error) {</span></p><br><p class="p1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="s1">if</span>(error){</p><br><p class="p3"><span class="s2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="s5">NSLog</span><span class="s2">(</span>@"Failed to register for push tokens: %@"<span class="s2">, error);</span></p><br><p class="p1">&nbsp; &nbsp; &nbsp; &nbsp; } <span class="s1">else</span> {</p><br><p class="p1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="s5">NSLog</span>(<span class="s6">@"Got a push token! %@"</span>, deviceToken);</p><br><p class="p1">&nbsp; &nbsp; &nbsp; &nbsp; }</p><br><p class="p1">&nbsp; &nbsp; }];</p><br><p class="p1">}</p><p class="p1"><br></p><p class="p1">2.Then called the message/send api, got following response:</p><p class="p1"></p><p class="p1">{</p><p class="p1"><span class="Apple-tab-span" style="white-space:pre">	</span> &nbsp; &nbsp;devices = 1;</p><p class="p1"><span class="Apple-tab-span" style="white-space:pre">	</span> &nbsp; &nbsp;result = ok;</p><p class="p1"><span class="Apple-tab-span" style="white-space:pre">	</span> &nbsp; &nbsp;user = "_S3EVB1iiQCu6LqxYE";</p><p class="p1"><span class="Apple-tab-span" style="white-space:pre">	</span> &nbsp; &nbsp;"user_id" = Soe;</p><p class="p1"><span class="Apple-tab-span" style="white-space:pre">	</span>}</p><p class="p1"><br></p><p class="p1">Still not getting push notification for the device.&nbsp;</p><p class="p1">Whats wrong with this????????????</p><br><br><br><br><br><br><br><br><p class="p3" style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;"><span class="s1"><br></span></p><br><p class="p2" style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;">&nbsp; &nbsp;&nbsp;</p><div style="font-family: Arial, Verdana; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal;"><br><div><br></div></div>		</div>
         </div>
</li>
		<li>
			<div class="Tabs DiscussionTabs AnswerTabs">
			<strong>1 Comment</strong> sorted by 
				<ul>
					<li class="Active"><a href="http://community.geoloqi.com/discussion/comment/337?Sort=popular" rel="nofollow">Votes</a></li>
					<li><a href="http://community.geoloqi.com/discussion/comment/337?Sort=date" rel="nofollow">Date Added</a></li>
				</ul>			</div>
		</li>
		<li class="Item Comment Alt" id="Comment_337">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="/entry/signin?Target=discussion%2Fcomment%2F337" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="/entry/signin?Target=discussion%2Fcomment%2F337" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="aaronpk" href="/profile/2/aaronpk" class="ProfileLink"><img src="http://community.geoloqi.com/uploads/userpics/504/nH4SPOJELL2SX.jpg" alt="aaronpk" class="ProfilePhotoMedium" /></a><a href="/profile/2/aaronpk">aaronpk</a>         </span>
         <span class="DateCreated">
            <a href="/discussion/comment/337#Comment_337" class="Permalink" name="Item_2" rel="nofollow">August 2012</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			If you see "devices = 1" when running message/send then it did attempt to send a push notification. Please make sure you uploaded your push notification certificate to the website following this guide:&nbsp;<a href="http://developers.geoloqi.com/ios/push-notifications" target="_blank" rel="nofollow">http://developers.geoloqi.com/ios/push-notifications</a><div><br></div><div>If the app is in the foreground when the push notification is sent, it is possible it will not be displayed unless you have specifically written code to handle this case. For a more reliable test, make sure the application is in the not open and then send the push notification.</div>		</div>
         </div>
</li>
</ul>
   <div class="Foot">
      <a href="/entry/signin?Target=discussion%2Fcomment%2F337%3Fpost%23Form_Body" class="TabLink">Add a Comment</a> 
   </div>
   </div>
         <div id="Panel"><div class="Box GuestBox">
   <h4>Howdy, Stranger!</h4>
   <p>It looks like you're new here. If you want to get involved, click one of these buttons!</p>
      
   <div class="P"><a href="/entry/signin?Target=discussion%2Fcomment%2F337" class="Button">Sign In</a> <a href="/entry/register?Target=discussion%2Fcomment%2F337" class="Button ApplyButton">Apply for Membership</a></div>   </div><div class="Box BoxCategories">
   <h4><a href="/categories/all">Categories</a></h4>
   <ul class="PanelInfo PanelCategories">
      <li><span><strong><a href="/discussions">All Discussions</a></strong><span class="Count">340</span></span></li>
<li class="Depth1"><strong><a href="/categories/bug-reports">Bug Reports</a></strong><span class="Count">89</span></li>
<li class="Depth1"><strong><a href="/categories/feature-requests">Feature Requests</a></strong><span class="Count">7</span></li>
<li class="Depth1 Active"><strong><a href="/categories/support">Support</a></strong><span class="Count">88</span></li>
<li class="Depth1"><strong><a href="/categories/layers">Layers</a></strong><span class="Count">132</span></li>
<li class="Depth1"><strong><a href="/categories/general">General</a></strong><span class="Count">24</span></li>
   </ul>
</div>
         <div class="Box">
         <h4>In this Discussion</h4>
         <ul class="PanelInfo">
                     <li>
               <strong><a href="/profile/2/aaronpk" class="UserLink">aaronpk</a></strong>
               August 2012            </li>
                     </ul>
      </div>
      </div>
      </div>
      <div id="Foot">
			<!-- Various definitions for Javascript //-->
<div id="Definitions" style="display: none;">
<input type="hidden" id="ImageResized" value="This image has been resized to fit in the page. Click to enlarge." />
<input type="hidden" id="DiscussionID" value="101" />
<input type="hidden" id="apcavailable" value="" />
<input type="hidden" id="uploaderuniq" value="54f249f2e879b" />
<input type="hidden" id="maxuploadsize" value="31457280" />
<input type="hidden" id="AnalyticsTask" value="tick" />
<input type="hidden" id="LastCommentID" value="337" />
<input type="hidden" id="Vanilla_Comments_AutoRefresh" value="0" />
<input type="hidden" id="TransportError" value="A fatal error occurred while processing the request.&lt;br /&gt;The server returned the following response: %s" />
<input type="hidden" id="TransientKey" value="ACS04R7EEIJP" />
<input type="hidden" id="WebRoot" value="http://community.geoloqi.com/" />
<input type="hidden" id="UrlFormat" value="/{Path}" />
<input type="hidden" id="Path" value="discussion/comment/337" />
<input type="hidden" id="SignedIn" value="0" />
<input type="hidden" id="ConfirmHeading" value="Confirm" />
<input type="hidden" id="ConfirmText" value="Are you sure you want to do that?" />
<input type="hidden" id="Okay" value="Okay" />
<input type="hidden" id="Cancel" value="Cancel" />
<input type="hidden" id="Search" value="Search" />
</div><div><a href="http://vanillaforums.org">Powered by Vanilla</a></div>		</div>
   </div>
	</body>
</html>
<script src="https://geoloqi.com/offline/geoloqi.js"></script>
